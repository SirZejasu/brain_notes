---
tags:
  - technische_informatik
  - tgi
  - Programmieren_in_Assembler
sticker: ""
banner_y: "48.5"
---

# Allgemein
> [!NOTE]
    > Bestimmte Vorgänge müssen aufeinander (zeitlich) abgestimmt werden.

# Synchronisationsarten

| Synchronisationart | Bedeutung                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Beispiel                                                                                                                                                                                                                                   | Nachteil gegenüber der anderen Art                                                                                                                                                                         |
| ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Polling            | Auch "aktives Warten" genannt<br><br>Polling wartet ein Vorgang, bis ein vorangehender Vorgang abgeschlossen ist.<br><br>Beim Polling ist die Schnittstelle also passiv. Sie wird vom Programm aus abgefragt und muss ausschließlich reagieren, nie agieren.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 1. Eingabeprogramm liest Daten von Schnittstelle.<br>2. Ein bestimmter Flag gibt an, ob die Daten gültig sind.<br>3. Sobald der Flag gültig ist, werden die Daten vom Eingabeprogramm gelesen.<br><br>![[Pasted image 20250821160134.png]] | Prozessor muss warten und kann nichts anderes machen.                                                                                                                                                      |
| Interrupts         | Sobald Daten bei der Schnittstelle auftreten, sendet es ein Signal an das Programm.<br><br>Der Interrupt ist eine Anforderung an den Prozessor, das momentane Programme (vorübergehend) zu unterbrechen.<br><br>Bei der **Akzeptierung** wird das momentane Programm pausiert und die "Interrupt-Service-Routine" (ISR) wird gestartet.<br><br>Der ISR ist Programm, dass im Grunde genommen die Unterbrechung ausführt.<br><br>Bei einer **Ablehnung** wird der Interrupt zu einem anderen Zeitpunkt weitergeführt.<br><br>Typische Schnittstellen: Tastatur, Drucker, Hintergrundspeicher, Debugging, [[Definitionen zu Prozessor-nahe Komponenten#Liste von Definitionen auf Assembler-Ebene\|prozessnahe Komponenten]] wie ein Watchdog, TPU  etc. | ![[Pasted image 20250821161922.png\|600]]                                                                                                                                                                                                  | Zum Anderen kann die Ursache eines Interrupts ein „ungewolltes“ Ereignis sein, wie etwa ein Hardwarefehler, ein fehlerhaftes Bussignal oder auch der Versuch, eine Zahl durch Null zu teilen. (Exceptions) |


# Weiteres über Interrupts
## Vergleich von ISR und Unterprogrammaufruf (Sprung)
### Ähnlichkeiten
> [!example] Ähnlichkeiten
    > Ein Interrupt als auch ein [[Befehle in Assembler#Sprungbefehle|Unterpgrammaufruf]] verändern den Programmzähler mit einem anderen Wert und das Programm wird an anderer Stell weiter ausgeführt.
    > 
    > Am Ende beider Programme wird jeweils ein RETURN-Befehl ausgeführt, siehe [[Befehle in Assembler#Liste der Assembler-Befehle]] unter RTS und RTE

### Unterschiede

| Unterprogrammausruf                                                        | Interrupt Service Routine                                                                                                                                                                                                                                                                                                                                                                                                                   | Beispiel                   |
| -------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------- |
| Ein Unterprogrammaufruf wechselt an vom Programmierer definierten Stellen. | Externes Signal und kann asynchron an vom Programmierer nicht vorhersehbaren Zeitpunkten bzw. Programmpunkten auftreten. Der Wechsel ist also so gut wie unvorhersehbar.                                                                                                                                                                                                                                                                    |                            |
| Rücksprungadresse wird gespeichert.                                        | Rücksprungadresse und vorheriger Stand des Statusregisters wird im Stack gespeichert.<br><br>Erst Wird der Statusregister geladen, dann die Rücksprungadresse.<br><br>Dies hat den Hintergrund, dass ein ISR Berechnungen ausführen kann und die Flags (aus Register CCR), die auch von "Hauptprogramm" verwendet werden, überschrieben werden. Beim weiteren ausführen des Hauptprogramms würde es also zu einem falschen Ergebnis führen. | `CMPI #$0, D0<br>BEQ proc` |
| Startadresse vom Programmierer definiert.                                  | Startadresse von ISR sind in eine Vektortabelle (Vektor = Zeiger) hinterlegt.<br>Die Vektortabelle ist Teil des Hauptspeichers.<br>Bei einem Interrupt wird (explizit oder implizit) eine Vektornummer geliefert, aus der sich die Speicheradresse des ISRs berechnet.                                                                                                                                                                      |                            |
| Läuft im User-Modus                                                        | Läuft im Supervisor-Modus. Damit haben sie mehr Berechtigungen. Ermöglicht vollständigen Zugriff auf Hardware<br><br>Wichtigster Grund dafür: ISR benötigen Zugriff auf interne Register des Prozessors, um interne Fehlerzustände zu bereinigen.                                                                                                                                                                                           |                            |
# Liste von Definitionen auf Assembler-Ebene

| Name     | Bedeutung                                                               |
| -------- | ----------------------------------------------------------------------- |
| Watchdog | Eine Rechnerkomponente, die andere Komponenten eines Rechner überwacht. |
| TPU      | = **T**ime **P**rozessor **U**nit                                       |
